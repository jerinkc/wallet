<div class="loan">
  <h2>Loans</h2>
  <hr/>
  <div class="card mt-5">
    <div class="card-body">
      <p class="d-flex">
        <div class="d-flex align-items-baseline">
          <h1>$<%= @loan.amount %></h1> &nbsp;
          <span>for <strong><%= @loan.interest %>%</strong></span>
        </div>
      </p>
    </div>
    <div class="card-footer text-muted pb-3">
      <p class="mt-3"><strong>Requested By</strong> <br/>
        <%= @loan.requested_by %>
      </p>
      <p class="mt-3 mb-2"><strong>Actions</strong></p>
      <% if @loan.actions.empty? %>
          <span><%= @loan.status.titleize %></span>
      <% end %>
      <div class="d-inline-flex">
        <% @loan.actions.each do |action| %>
            <% if action[:method] == :get %>
              <%= link_to action[:name], action[:path], class: "m-1 btn #{action[:class]}" %>
            <% else %>
              <%= button_to action[:name], action[:path], method: :patch, data: { turbo: false }, class: "m-1 btn #{action[:class]}" %>
            <% end %>
        <% end %>
      </div>
    </div>
  </div>
<% if false %>
  <div>
    <div class="card mt-5">
      <div class="card-body">
        <h3>History</h3>
        <div class="mt-5">
          <table class="table table-striped">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Request Amount</th>
                <th scope="col">Interest</th>
                <th scope="col">Edited By</th>
                <th scope="col">Date and Time</th>
              </tr>
            </thead>
            <tbody>
              <% @loan.history.each.with_index do |edit, index| %>
                <tr>
                  <th scope="row"><%= index + 1 %></th>
                  <td>
                    <%=  edit.percentage %>
                  </td>
                  <td scope="row"><%= edit.edited_by %></td>
                  <td><%= edit.edited_at %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <% end %>
</div>

